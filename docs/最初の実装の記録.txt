teLabというソフトウェア開発事業者のWEBサイトの作成をしてください。私のソフトウェアを紹介、販売するサイトです。

これから teLab_Website（Next.js + Vercel + Stripe 決済 + macOSアプリ直販サイト）を構築します。

Phase1 を開始してください。


## Phase 1: プロジェクト雛形とページ構造

### Codex への指示文

1. Next.js プロジェクトを作成してほしい。

* フレームワーク: Next.js 13+ App Router
* 言語: TypeScript
* スタイリング: Tailwind CSS
* デプロイ想定: Vercel
* ディレクトリ構成は Next.js の標準に従う (`app/` ディレクトリ使用)

2. 共通レイアウトを作成してほしい。

* `app/layout.tsx` に以下を実装:

  * `<html lang="ja">`
  * `<body>` 内に共通レイアウトコンポーネントを配置
* `src/components/Header.tsx` と `src/components/Footer.tsx` を作成し、`layout.tsx` から読み込む。
* Header の内容:

  * 左側にサイト名（テキストロゴ）: `teLab`
  * 右側にナビゲーション:

    * Home (`/`)
    * Apps (`/apps`)
    * About (`/about`)
    * Contact (`/contact`)
* Footer の内容:

  * コピーライト: `© {今年} teLab`
  * リンク: Privacy (`/privacy`), Terms (`/terms`)

3. アプリ情報と販売情報のデータファイルを作成してほしい。

* `src/data/apps.ts` を作成し、以下のような型とダミーデータを定義:

```ts
export type AppPlatform = 'ios' | 'macos';

export type AppMeta = {
  id: 'puzzle' | 'clipslot';
  name: string;
  shortDescription: string;
  tagline: string;
  platforms: AppPlatform[];
  iosAppStoreUrl?: string;
  macBuyProductId?: string; // 後で /buy/[productId] と紐付ける
};

export const apps: AppMeta[] = [
  {
    id: 'puzzle',
    name: 'Puzzle',
    shortDescription: 'ウィンドウをパズルのように素早く整列させるツール。',
    tagline: '開いているウィンドウを、一瞬で「ちょうどいい配置」に。',
    platforms: ['ios', 'macos'],
    iosAppStoreUrl: 'https://example.com/puzzle-ios', // 仮
    macBuyProductId: 'puzzle-mac',
  },
  {
    id: 'clipslot',
    name: 'ClipSlot',
    shortDescription: '固定スロット型のクリップボードマネージャ。',
    tagline: 'よく使うコピーを、即座に呼び出す。',
    platforms: ['ios', 'macos'],
    iosAppStoreUrl: 'https://example.com/clipslot-ios', // 仮
    macBuyProductId: 'clipslot-mac',
  },
];
```

* `src/data/products.ts` を作成し、販売用データの型とダミー値だけ定義（Stripe連携は後のフェーズ）:

```ts
export type ProductId = 'puzzle-mac' | 'clipslot-mac';

export type ProductMeta = {
  id: ProductId;
  appId: 'puzzle' | 'clipslot';
  name: string;
  description: string;
  price: number; // 税込・JPY
  currency: 'jpy';
  stripePriceId: string; // 後で本物を入れる
  downloadKey: string;   // 後でダウンロードファイルと紐付ける
};

export const products: ProductMeta[] = [
  {
    id: 'puzzle-mac',
    appId: 'puzzle',
    name: 'Puzzle for macOS',
    description: 'ウィンドウ配置を素早く整える macOS 用ユーティリティ。',
    price: 1200,
    currency: 'jpy',
    stripePriceId: 'price_dummy_puzzle_mac',
    downloadKey: 'puzzle-mac-v1',
  },
  {
    id: 'clipslot-mac',
    appId: 'clipslot',
    name: 'ClipSlot for macOS',
    description: '固定スロット型のクリップボードマネージャ（macOS版）。',
    price: 1200,
    currency: 'jpy',
    stripePriceId: 'price_dummy_clipslot_mac',
    downloadKey: 'clipslot-mac-v1',
  },
];
```

4. ページを最低限の文言で作ってほしい。

* `app/page.tsx`（トップページ）:

  * 見出し: 「シンプルなツールで、集中できるワークフローを。」
  * 短いリード文
  * 代表アプリ（Puzzle, ClipSlot）を `apps` データから2つ表示する簡易カード
  * 「アプリ一覧を見る」ボタン → `/apps` へのリンク

* `app/apps/page.tsx`:

  * `apps` 配列を map してカード表示
  * 各カードに:

    * name
    * shortDescription
    * 対応プラットフォーム一覧
    * 詳細ボタン → `/apps/[id]` へのリンク

* `app/apps/[id]/page.tsx`:

  * `params.id` を使って `apps` から対象アプリを取得
  * タイトル（name）、tagline、shortDescription を表示
  * 対応プラットフォームを表示
  * ボタン群:

    * iOS がある場合: 「iOS 版を App Store で見る」 → `iosAppStoreUrl`
    * macOS がある場合: 「macOS 版を購入する」 → `/buy/{macBuyProductId}` のリンク
  * 中身の説明文は仮で良い（数行のプレースホルダテキスト）

* `app/about/page.tsx`, `app/contact/page.tsx`, `app/privacy/page.tsx`, `app/terms/page.tsx`:

  * それぞれ簡単なプレースホルダテキストでOK。
  * Contact ページはこのフェーズではまだフォームなしで構わない（後でフォームを入れる）。

5. Tailwind で全体の見た目を最低限整えてほしい。

* ベース:

  * ルートコンテナは `max-w-5xl mx-auto px-4` 程度
  * セクション間に `py-12` 前後の余白
* ヘッダー / フッター / カードに軽く枠線・余白を与える程度でよい。
* 色はモノトーン＋アクセント1色だけ使う。アクセントは `indigo-500` あたりの仮色で良い（後で差し替える）。

---

## Phase 2: Contactフォームと最低限の販売導線

### Codex への指示文

1. `/contact` にシンプルな問い合わせフォームを追加してほしい。

* フィールド:

  * 名前（必須）
  * メールアドレス（必須）
  * 種別（セレクトボックス）: バグ報告 / 機能要望 / 開発相談 / その他
  * 本文（必須）
* このフェーズでは、送信先はダミーで構わない。

  * まずはフロント側だけ実装し、「未実装: 送信処理は後で追加」とコメントしておく。
* 必須チェックとメール形式チェックの簡易バリデーションを入れる（フロント側でOK）。

2. `/pricing` ページを追加してほしい。

* 内容:

  * アプリごとに簡易価格表を表示。

  * Puzzle:

    * iOS 版: 「App Store で販売（詳細は iOS ストア側）」＋ `/apps/puzzle` へのリンク
    * macOS 版: 価格（`products` の price を使用）＋ `/buy/puzzle-mac` へのリンク
  * ClipSlot も同様。
* レイアウトはシンプルなテーブル or カードでOK。

3. `/buy/[productId]` のプレースホルダページを作ってほしい（Stripe 実装前）。

* `app/buy/[productId]/page.tsx` を作成。
* `products` から該当する `ProductMeta` を取得して表示。
* 表示内容:

  * name
  * description
  * 価格
  * 注意書き（「このページから Stripe 決済に進みます（実装は後で）」程度）
* 「購入する」ボタンはまだダミー。`onClick` でコンソールログを出すだけでOK。
* このフェーズでは Stripe に接続しない。UI だけ整える。

---

## Phase 3: Stripe 決済とダウンロードページ

### Codex への指示文（Phase 1〜2 完了後）

1. Stripe を使った決済フローを実装してほしい。

* 環境変数:

  * `STRIPE_SECRET_KEY`
  * `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY`
* `stripe` npm パッケージを導入し、サーバ側で `Stripe` クライアントを初期化するユーティリティを作成。

  * 例: `src/lib/stripe.ts` に `getStripeClient()` を定義。

2. `POST /api/checkout` エンドポイントを作成してほしい。

* Path: `app/api/checkout/route.ts`
* 入力:

  * JSON body: `{ productId: string }`
* 処理:

  * `productId` から `products` を参照して `stripePriceId` を取得。
  * Stripe の Checkout Session を作成:

    * `mode: 'payment'`
    * `line_items: [{ price: stripePriceId, quantity: 1 }]`
    * `success_url: https://{本番ドメイン}/download?session_id={CHECKOUT_SESSION_ID}`
    * `cancel_url: https://{本番ドメイン}/buy/{productId}`
  * 生成された `session.url` を JSON で返す。
* エラーハンドリング:

  * product が見つからない場合や Stripe エラー時は 400/500 を返す。

3. `/buy/[productId]` の「購入する」ボタンから `/api/checkout` を呼び出し、返ってきた URL にリダイレクトするようにしてほしい。

* クライアントコンポーネント化して、`fetch('/api/checkout', { method:'POST', body: JSON.stringify({ productId }) })` を実行。
* 応答 JSON の `url` へ `window.location.href` で遷移。

4. `/download` ページを実装してほしい。

* Path: `app/download/page.tsx`
* クエリ文字列から `session_id` を取得。
* サーバコンポーネント or Route Handler で Stripe API を呼び出し、Session を取得。

  * `payment_status === 'paid'` を確認。
* 正常な場合:

  * Session からどの `productId` を購入したか特定（`client_reference_id` か `metadata` に `productId` を入れておく）。
  * `productId` に対応する `downloadKey` を取得。
  * このフェーズではとりあえず `downloadKey` をそのまま表示するか、ダミーのダウンロードリンクを表示する。

    * 例: `/downloads/puzzle-mac-v1.dmg` へのリンク（実ファイルは後で配置する）。
* エラーの場合:

  * 「決済が確認できませんでした。お手数ですがサポートまでご連絡ください。」的なメッセージを表示。

5. ダウンロードファイルとの紐付けは、まずはダミーでよい。

* `public/downloads/` 以下に、ダミーファイル名だけ用意してリンクを張るか、`href="#"` のプレースホルダでもよい。
* 後で本物の notarize 済み `.dmg` / `.pkg` を置いて差し替えられるようにしておいてほしい。

---

ここまでが「開発を進めるための最低限の文言＋Codexへの引き継ぎ指示」。

次のタイミングでやるべきことはシンプルで、

* Phase 1 指示をそのまま Codex に渡して実装させる
* 動いたら Phase 2 → Phase 3 と順に投げる

という流れで十分回るはず。


  1. Set STRIPE_SECRET_KEY, NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY, and
     NEXT_PUBLIC_APP_URL in your env/hosting platform, then wire the publishable
     key into a real Checkout trigger if needed.
  2. Replace the placeholder files in public/downloads/ with the signed
     installers and consider protecting the download links (signed URLs, license
     checks, etc.).
